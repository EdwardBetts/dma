dma (0.0.2010.06.17-1) UNRELEASED; urgency=low

  * New upstream version:
    - adapt the rules file to use the GNU Makefile instead of the BSD one
    - update the 01-debian-build patch:
      - no longer patch the BSD Makefile, we use the GNU one now
      - remove the compatibility shims implemented upstream in a different way
    - in the 03-debian-locations patch, make the Debian defaults actual
      defaults for the dma binary, not just in the dma.conf file
    - adapt the 04-debian-setgid patch for the GNU Makefile
    - in the 10-liblockfile patch, change the GNU Makefile, not the BSD one
    - enhance the 11-double-bounce patch a bit:
      - use dma's own delqueue() function instead of a naive unlink() so
        all the queue files are cleaned up
      - document the Debian default for DBOUNCEPROG in the manual page
    - resurrect the 13-hardening patch, correcting a couple of
      unchecked asprintf(3) and vasprintf(3) invocations
    - remove the 20-parse-recipient patch, implemented upstream in
      a different way
    - remove the 22-openfiles patch, overtaken by upstream changes
    - in the 24-random-message-id patch, change the GNU Makefile,
      not the BSD one
    - add the 27-int-size patch to cast a variable to the correct type
    - add the 28-valid-recipient patch to fix parsing recipients out of
      the message body
    - add the 29-double-free patch to fix a double-free error
    - add the 30-ldflags patch to honor LDFLAGS if specified
    - refresh the 09-typos, 17-mailname, 23-dirent-d_type, and
      25-unsupported-starttls patches
    - teach the dbounce-simple-safecat handler about the M*/Q* spool
      files scheme
  * Bump Standards-Version to 3.8.4 with no changes.
  * Bring the copyright file up to the latest revision of the DEP 5
    proposed format and bump the year on my copyright notice.
  * Remove the diffsrc rules target which was intended for my own
    internal use, but has outlived its time.
  * Use dpkg-buildflags from dpkg-dev >= 1.15.7~ to get the default
    values for CFLAGS, CPPFLAGS, and LDFLAGS; no longer rely on
    dpkg-buildpackage to set them by default.
  * Add the dma-migrate utility (in a separate binary package) to convert
    spool files to the new queue format (M* and Q* files for each message)
  * Add a dma-migrate invocation to dma.cron.d
  * Shorten the Vcs-Browser URL.

 -- Peter Pentchev <roam@ringlet.net>  Wed, 02 Jun 2010 14:10:05 +0300

dma (0.0.2009.07.17-3) unstable; urgency=low

  * Really install the files in /etc/dma/ as root/mail/640 and
    change the ownership of the existing files in the postinst script
    when upgrading from older versions.  Closes: #544664
  * Install the /usr/bin/mailq and /usr/bin/newaliases symlinks.
    Closes: #558421
  * Switch to the 3.0 (quilt) source format.
  * Update the debconf translations:
    - add German.  Closes: #552754
    - add Japanese.  Closes: #554515
    - remove a double space and unfuzzy the translations.  Closes: #552586
  * Fix a crash when the SMTP server does not support STARTTLS.
    Closes: #547594
  * Always use the user-supplied value from the debconf query for
    the smarthost and the double-bounce program.  This may result in
    debconf overriding a manually-edited config file, so add a note to
    dma.conf stating that these values are handled via debconf.
    Closes: #544663
  * Fix a misspelling of dma/dbounceprog as dma/defer in the debconf
    configuration script.  Oops.

 -- Peter Pentchev <roam@ringlet.net>  Sat, 19 Dec 2009 14:35:10 +0200

dma (0.0.2009.07.17-2) unstable; urgency=low

  * Allow the spool directory to live on a filesystem that does not
    set the d_type member of the dirent structure, like XFS.
    Closes: #544357
  * Randomize the Message-Id a bit more.  Closes: #544475
  * Bump Standards-Version to 3.8.3 with no changes.
  * Only enable the build hardening wrapper if the "hardening" build
    option is specified.
  * Switch the copyright file header from the Wiki to DEP 5.
  * Remove the manual page ".Dx" patch - the groff version in Squeeze
    knows about the .Dx mdoc macro.  Add a lintian override for
    the "Unknown DragonFly version" error.
  * Convert the patch file headers to the DEP 3 format.

 -- Peter Pentchev <roam@ringlet.net>  Tue, 01 Sep 2009 13:36:33 +0300

dma (0.0.2009.07.17-1) unstable; urgency=low

  * Initial release
    (Closes: #511410, #533458, #533614, #533890, #534101, #534860)

 -- Peter Pentchev <roam@ringlet.net>  Tue, 11 Aug 2009 16:08:41 +0300
